import { Injectable } from '@angular/core';
import { of, Observable } from 'rxjs';
import * as ɵngcc0 from '@angular/core';
export const DEFAULT_THEME_COLOR = '#3b5560';
export const STEP_DEFAULT_POSITION = 'bottom';
export const DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;
export class ObservableCustomTexts {
}
export const DEFAULT_TEXTS = {
    prev: of('prev'),
    next: of('next'),
    done: of('done'),
    close: of(null)
};
export class JoyrideOptionsService {
    constructor() {
        this.themeColor = DEFAULT_THEME_COLOR;
        this.stepDefaultPosition = STEP_DEFAULT_POSITION;
        this.logsEnabled = false;
        this.showCounter = true;
        this.showPrevButton = true;
        this.stepsOrder = [];
    }
    setOptions(options) {
        this.stepsOrder = options.steps;
        this.stepDefaultPosition = options.stepDefaultPosition
            ? options.stepDefaultPosition
            : this.stepDefaultPosition;
        this.logsEnabled =
            typeof options.logsEnabled !== 'undefined'
                ? options.logsEnabled
                : this.logsEnabled;
        this.showCounter =
            typeof options.showCounter !== 'undefined'
                ? options.showCounter
                : this.showCounter;
        this.showPrevButton =
            typeof options.showPrevButton !== 'undefined'
                ? options.showPrevButton
                : this.showPrevButton;
        this.themeColor = options.themeColor
            ? options.themeColor
            : this.themeColor;
        this.firstStep = options.startWith;
        this.waitingTime =
            typeof options.waitingTime !== 'undefined'
                ? options.waitingTime
                : DEFAULT_TIMEOUT_BETWEEN_STEPS;
        typeof options.customTexts !== 'undefined'
            ? this.setCustomText(options.customTexts)
            : this.setCustomText(DEFAULT_TEXTS);
    }
    getBackdropColor() {
        return this.hexToRgb(this.themeColor);
    }
    getThemeColor() {
        return this.themeColor;
    }
    getStepDefaultPosition() {
        return this.stepDefaultPosition;
    }
    getStepsOrder() {
        return this.stepsOrder;
    }
    getFirstStep() {
        return this.firstStep;
    }
    getWaitingTime() {
        return this.waitingTime;
    }
    areLogsEnabled() {
        return this.logsEnabled;
    }
    isCounterVisible() {
        return this.showCounter;
    }
    isPrevButtonVisible() {
        return this.showPrevButton;
    }
    getCustomTexts() {
        return this.customTexts;
    }
    setCustomText(texts) {
        let prev;
        let next;
        let done;
        let close;
        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;
        next = texts.next ? texts.next : DEFAULT_TEXTS.next;
        done = texts.done ? texts.done : DEFAULT_TEXTS.done;
        close = texts.close ? texts.close : DEFAULT_TEXTS.close;
        this.customTexts = {
            prev: this.toObservable(prev),
            next: this.toObservable(next),
            done: this.toObservable(done),
            close: this.toObservable(close)
        };
    }
    toObservable(value) {
        return value instanceof Observable ? value : of(value);
    }
    hexToRgb(hex) {
        const shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, (m, r, g, b) => {
            return r + r + g + g + b + b;
        });
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result
            ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`
            : null;
    }
}
JoyrideOptionsService.ɵfac = function JoyrideOptionsService_Factory(t) { return new (t || JoyrideOptionsService)(); };
JoyrideOptionsService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: JoyrideOptionsService, factory: JoyrideOptionsService.ɵfac });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(JoyrideOptionsService, [{
        type: Injectable
    }], function () { return []; }, null); })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam95cmlkZS1vcHRpb25zLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1qb3lyaWRlL3NyYy9saWIvc2VydmljZXMvam95cmlkZS1vcHRpb25zLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU0zQyxPQUFPLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQzs7QUFFdEMsTUFBTSxDQUFDLE1BQU0sbUJBQW1CLEdBQUcsU0FBUyxDQUFDO0FBQzdDLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLFFBQVEsQ0FBQztBQUM5QyxNQUFNLENBQUMsTUFBTSw2QkFBNkIsR0FBRyxDQUFDLENBQUM7QUFFL0MsTUFBTSxPQUFPLHFCQUFxQjtBQUFJLENBS3JDO0FBQ0QsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUEwQjtBQUNwRCxJQUFJLElBQUksRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDO0FBQ3BCLElBQUksSUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUM7QUFDcEIsSUFBSSxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztBQUNwQixJQUFJLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDO0FBQ25CLENBQUMsQ0FBQztBQWlCRixNQUFNLE9BQU8scUJBQXFCO0FBQUksSUFEdEM7QUFDRSxRQUNVLGVBQVUsR0FBVyxtQkFBbUIsQ0FBQztBQUNyRCxRQUFZLHdCQUFtQixHQUFXLHFCQUFxQixDQUFDO0FBQ2hFLFFBQVksZ0JBQVcsR0FBRyxLQUFLLENBQUM7QUFDaEMsUUFBWSxnQkFBVyxHQUFHLElBQUksQ0FBQztBQUMvQixRQUFZLG1CQUFjLEdBQUcsSUFBSSxDQUFDO0FBQ2xDLFFBQVksZUFBVSxHQUFhLEVBQUUsQ0FBQztBQUN0QyxJQTZHQSxDQUFDO0FBQ0QsSUExR0ksVUFBVSxDQUFDLE9B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QUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQWlCQSxBQUFBLEFBQUEsQUFBQSxBQURBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBOEdBLEFBQUEsQUF6R0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFwSEEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICAgIEpveXJpZGVPcHRpb25zLFxyXG4gICAgQ3VzdG9tVGV4dHMsXHJcbiAgICBJQ3VzdG9tVGV4dHNcclxufSBmcm9tICcuLi9tb2RlbHMvam95cmlkZS1vcHRpb25zLmNsYXNzJztcclxuaW1wb3J0IHsgb2YsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1RIRU1FX0NPTE9SID0gJyMzYjU1NjAnO1xyXG5leHBvcnQgY29uc3QgU1RFUF9ERUZBVUxUX1BPU0lUSU9OID0gJ2JvdHRvbSc7XHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVPVVRfQkVUV0VFTl9TVEVQUyA9IDE7XHJcblxyXG5leHBvcnQgY2xhc3MgT2JzZXJ2YWJsZUN1c3RvbVRleHRzIGltcGxlbWVudHMgSUN1c3RvbVRleHRzIHtcclxuICAgIHByZXY6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuICAgIG5leHQ6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuICAgIGRvbmU6IE9ic2VydmFibGU8c3RyaW5nPjtcclxuICAgIGNsb3NlOiBPYnNlcnZhYmxlPHN0cmluZz47XHJcbn1cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVEVYVFM6IE9ic2VydmFibGVDdXN0b21UZXh0cyA9IHtcclxuICAgIHByZXY6IG9mKCdwcmV2JyksXHJcbiAgICBuZXh0OiBvZignbmV4dCcpLFxyXG4gICAgZG9uZTogb2YoJ2RvbmUnKSxcclxuICAgIGNsb3NlOiBvZihudWxsKVxyXG59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJSm95cmlkZU9wdGlvbnNTZXJ2aWNlIHtcclxuICAgIHNldE9wdGlvbnMob3B0aW9uczogSm95cmlkZU9wdGlvbnMpOiB2b2lkO1xyXG4gICAgZ2V0QmFja2Ryb3BDb2xvcigpOiBzdHJpbmc7XHJcbiAgICBnZXRUaGVtZUNvbG9yKCk6IHN0cmluZztcclxuICAgIGdldFN0ZXBEZWZhdWx0UG9zaXRpb24oKTtcclxuICAgIGdldFN0ZXBzT3JkZXIoKTogc3RyaW5nW107XHJcbiAgICBnZXRGaXJzdFN0ZXAoKTogc3RyaW5nO1xyXG4gICAgZ2V0V2FpdGluZ1RpbWUoKTogbnVtYmVyO1xyXG4gICAgYXJlTG9nc0VuYWJsZWQoKTogYm9vbGVhbjtcclxuICAgIGlzQ291bnRlclZpc2libGUoKTogYm9vbGVhbjtcclxuICAgIGlzUHJldkJ1dHRvblZpc2libGUoKTogYm9vbGVhbjtcclxuICAgIGdldEN1c3RvbVRleHRzKCk6IE9ic2VydmFibGVDdXN0b21UZXh0cztcclxufVxyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgSm95cmlkZU9wdGlvbnNTZXJ2aWNlIGltcGxlbWVudHMgSUpveXJpZGVPcHRpb25zU2VydmljZSB7XHJcbiAgICBwcml2YXRlIHRoZW1lQ29sb3I6IHN0cmluZyA9IERFRkFVTFRfVEhFTUVfQ09MT1I7XHJcbiAgICBwcml2YXRlIHN0ZXBEZWZhdWx0UG9zaXRpb246IHN0cmluZyA9IFNURVBfREVGQVVMVF9QT1NJVElPTjtcclxuICAgIHByaXZhdGUgbG9nc0VuYWJsZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgc2hvd0NvdW50ZXIgPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBzaG93UHJldkJ1dHRvbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIHN0ZXBzT3JkZXI6IHN0cmluZ1tdID0gW107XHJcbiAgICBwcml2YXRlIGZpcnN0U3RlcDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSB3YWl0aW5nVGltZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjdXN0b21UZXh0czogT2JzZXJ2YWJsZUN1c3RvbVRleHRzO1xyXG5cclxuICAgIHNldE9wdGlvbnMob3B0aW9uczogSm95cmlkZU9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnN0ZXBzT3JkZXIgPSBvcHRpb25zLnN0ZXBzO1xyXG4gICAgICAgIHRoaXMuc3RlcERlZmF1bHRQb3NpdGlvbiA9IG9wdGlvbnMuc3RlcERlZmF1bHRQb3NpdGlvblxyXG4gICAgICAgICAgICA/IG9wdGlvbnMuc3RlcERlZmF1bHRQb3NpdGlvblxyXG4gICAgICAgICAgICA6IHRoaXMuc3RlcERlZmF1bHRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmxvZ3NFbmFibGVkID1cclxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMubG9nc0VuYWJsZWQgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMubG9nc0VuYWJsZWRcclxuICAgICAgICAgICAgICAgIDogdGhpcy5sb2dzRW5hYmxlZDtcclxuICAgICAgICB0aGlzLnNob3dDb3VudGVyID1cclxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2hvd0NvdW50ZXIgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuc2hvd0NvdW50ZXJcclxuICAgICAgICAgICAgICAgIDogdGhpcy5zaG93Q291bnRlcjtcclxuICAgICAgICB0aGlzLnNob3dQcmV2QnV0dG9uID1cclxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2hvd1ByZXZCdXR0b24gIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuc2hvd1ByZXZCdXR0b25cclxuICAgICAgICAgICAgICAgIDogdGhpcy5zaG93UHJldkJ1dHRvbjtcclxuICAgICAgICB0aGlzLnRoZW1lQ29sb3IgPSBvcHRpb25zLnRoZW1lQ29sb3JcclxuICAgICAgICAgICAgPyBvcHRpb25zLnRoZW1lQ29sb3JcclxuICAgICAgICAgICAgOiB0aGlzLnRoZW1lQ29sb3I7XHJcbiAgICAgICAgdGhpcy5maXJzdFN0ZXAgPSBvcHRpb25zLnN0YXJ0V2l0aDtcclxuICAgICAgICB0aGlzLndhaXRpbmdUaW1lID1cclxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMud2FpdGluZ1RpbWUgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMud2FpdGluZ1RpbWVcclxuICAgICAgICAgICAgICAgIDogREVGQVVMVF9USU1FT1VUX0JFVFdFRU5fU1RFUFM7XHJcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuY3VzdG9tVGV4dHMgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgID8gdGhpcy5zZXRDdXN0b21UZXh0KG9wdGlvbnMuY3VzdG9tVGV4dHMpXHJcbiAgICAgICAgICAgIDogdGhpcy5zZXRDdXN0b21UZXh0KERFRkFVTFRfVEVYVFMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJhY2tkcm9wQ29sb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGV4VG9SZ2IodGhpcy50aGVtZUNvbG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUaGVtZUNvbG9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRoZW1lQ29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3RlcERlZmF1bHRQb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGVwRGVmYXVsdFBvc2l0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN0ZXBzT3JkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHNPcmRlcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGaXJzdFN0ZXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RTdGVwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdhaXRpbmdUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndhaXRpbmdUaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGFyZUxvZ3NFbmFibGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvZ3NFbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ291bnRlclZpc2libGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0NvdW50ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQcmV2QnV0dG9uVmlzaWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaG93UHJldkJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXN0b21UZXh0cygpOiBPYnNlcnZhYmxlQ3VzdG9tVGV4dHMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVRleHRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q3VzdG9tVGV4dCh0ZXh0czogQ3VzdG9tVGV4dHMpIHtcclxuICAgICAgICBsZXQgcHJldjogc3RyaW5nIHwgT2JzZXJ2YWJsZTxzdHJpbmc+O1xyXG4gICAgICAgIGxldCBuZXh0OiBzdHJpbmcgfCBPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICAgICAgbGV0IGRvbmU7XHJcbiAgICAgICAgbGV0IGNsb3NlO1xyXG4gICAgICAgIHByZXYgPSB0ZXh0cy5wcmV2ID8gdGV4dHMucHJldiA6IERFRkFVTFRfVEVYVFMucHJldjtcclxuICAgICAgICBuZXh0ID0gdGV4dHMubmV4dCA/IHRleHRzLm5leHQgOiBERUZBVUxUX1RFWFRTLm5leHQ7XHJcbiAgICAgICAgZG9uZSA9IHRleHRzLmRvbmUgPyB0ZXh0cy5kb25lIDogREVGQVVMVF9URVhUUy5kb25lO1xyXG4gICAgICAgIGNsb3NlID0gdGV4dHMuY2xvc2UgPyB0ZXh0cy5jbG9zZSA6IERFRkFVTFRfVEVYVFMuY2xvc2U7XHJcbiAgICAgICAgdGhpcy5jdXN0b21UZXh0cyA9IHtcclxuICAgICAgICAgICAgcHJldjogdGhpcy50b09ic2VydmFibGUocHJldiksXHJcbiAgICAgICAgICAgIG5leHQ6IHRoaXMudG9PYnNlcnZhYmxlKG5leHQpLFxyXG4gICAgICAgICAgICBkb25lOiB0aGlzLnRvT2JzZXJ2YWJsZShkb25lKSxcclxuICAgICAgICAgICAgY2xvc2U6IHRoaXMudG9PYnNlcnZhYmxlKGNsb3NlKVxyXG4gICAgICAgIH0gYXMgT2JzZXJ2YWJsZUN1c3RvbVRleHRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9PYnNlcnZhYmxlKHZhbHVlOiBzdHJpbmcgfCBPYnNlcnZhYmxlPHN0cmluZz4pIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBPYnNlcnZhYmxlID8gdmFsdWUgOiBvZih2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoZXhUb1JnYihoZXg6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3Qgc2hvcnRoYW5kUmVnZXggPSAvXiM/KFthLWZcXGRdKShbYS1mXFxkXSkoW2EtZlxcZF0pJC9pO1xyXG4gICAgICAgIGhleCA9IGhleC5yZXBsYWNlKHNob3J0aGFuZFJlZ2V4LCAobTogYW55LCByOiBhbnksIGc6IGFueSwgYjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByICsgciArIGcgKyBnICsgYiArIGI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICAgICAgPyBgJHtwYXJzZUludChyZXN1bHRbMV0sIDE2KX0sICR7cGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICAgIHJlc3VsdFsyXSxcclxuICAgICAgICAgICAgICAgICAgMTZcclxuICAgICAgICAgICAgICApfSwgJHtwYXJzZUludChyZXN1bHRbM10sIDE2KX1gXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxufVxyXG4iXX0=